(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[85],{1795:function(e,t,a){"use strict";a.r(t);var s=a(1),i=a(28),n=a(739),r=a(95),o=a(710),c=a(172),d=a(633),l=a(685),j=a(704),h=a(75),b=a(49),x=a(21),p=a(68),O=a(121),m=a(35),g=a(0);const u=Object(x.a)(p.a)((()=>({display:"flex",alignItems:"center"}))),f=Object(x.a)(u)((()=>({flexWrap:"wrap"}))),C=Object(x.a)(b.b)((e=>{let{theme:t}=e;return{flexGrow:1,display:"flex",alignItems:"center"}}));var k=e=>{let{todo:t={tag:[]},tagList:a,updateTodo:s}=e;const{palette:i}=Object(O.a)(),b=i.text.secondary;return Object(g.jsx)(n.a,{sx:{borderRadius:0},elevation:1,children:Object(g.jsxs)(f,{p:2,children:[Object(g.jsxs)(C,{to:"/todo/list/".concat(t.id),children:[Object(g.jsx)(r.a,{sx:{cursor:"move"},children:"open_with"}),Object(g.jsxs)(p.a,{ml:2,children:[Object(g.jsx)(m.g,{sx:{mb:2},children:t.title}),Object(g.jsx)(m.g,{sx:{mb:"12px",color:b},children:t.note}),t.tag.map(((e,t)=>(a.find((t=>t.id===e))||{}).name?Object(g.jsx)(o.a,{sx:{mr:"12px"},label:a.find((t=>t.id===e)).name},t):null))]})]}),Object(g.jsxs)(f,{children:[Object(g.jsx)(c.a,{onClick:()=>s({...t,important:!t.important}),children:Object(g.jsx)(r.a,{color:t.important?"error":"inherit",children:t.important?"error":"error_outline"})}),Object(g.jsx)(c.a,{onClick:()=>s({...t,starred:!t.starred}),children:Object(g.jsx)(r.a,{color:t.starred?"secondary":"inherit",children:t.starred?"star":"star_outline"})}),Object(g.jsxs)(h.h,{menuButton:Object(g.jsx)(c.a,{children:Object(g.jsx)(r.a,{children:"more_vert"})}),children:[Object(g.jsx)(d.a,{children:Object(g.jsx)(l.a,{onChange:()=>s({...t,done:!t.done}),control:Object(g.jsx)(j.a,{checked:t.done}),label:"Mark As ".concat(t.done?"Und":"D","one")})}),Object(g.jsx)(d.a,{children:Object(g.jsx)(l.a,{onChange:()=>s({...t,read:!t.read}),control:Object(g.jsx)(j.a,{checked:t.read}),label:"Mark As ".concat(t.read?"Unr":"R","ead")})})]})]})]})})},y=a(1423),v=a(19),w=a.n(v);const T=e=>w.a.post("/api/todo/update",{todo:e}),D=()=>w.a.get("/api/todo/tag");var S=a(89),z=a(382);const I=Object(x.a)(n.a)((e=>{let{theme:t}=e;return{margin:"30px",position:"relative",[t.breakpoints.down("sm")]:{margin:"16px"}}})),L=Object(x.a)(p.a)((()=>({paddingTop:"8px",paddingBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(0, 0, 0, 0.01)"})));var A=e=>{let{query:t}=e;const[a,n]=Object(s.useState)(!0),[o,l]=Object(s.useState)([]),[j,b]=Object(s.useState)([]),[x,O]=Object(s.useState)([]),m=Object(i.h)(),u=Object(s.useCallback)((async()=>{let[{data:e},{data:t}]=await Promise.all([w.a.get("/api/todo/all"),D()]);a&&(O(e),l(e),b(t))}),[a]),f=Object(s.useCallback)(Object(S.debounce)((e=>{if(e=e.trim().toLowerCase()){let t=o.filter((t=>t.title.toLowerCase().match(e)||t.note.toLowerCase().match(e)));""!==e&&O([...t])}}),250),[o]);Object(s.useEffect)((()=>(u(),()=>n(!1))),[u]),Object(s.useEffect)((()=>{f(t)}),[t,f]);const C=async e=>{const{data:t}=await T(e);if(a){let e=o.map((e=>e.id===t.id?t:e)),a=x.map((e=>e.id===t.id?t:e));l([...e]),O([...a])}},v=(e,t)=>{if("all"!==e){let a=o.filter((a=>a[e]===t));O([...a])}else O([...o])},A=e=>{if("all"!==e){let t=o.filter((t=>t.tag.includes(e)));O([...t])}else O([...o])};return Object(g.jsxs)(I,{className:"todo",children:[Object(g.jsxs)(L,{children:[Object(g.jsxs)("div",{children:[Object(g.jsxs)(h.h,{menuButton:Object(g.jsx)(c.a,{size:"large",children:Object(g.jsx)(r.a,{children:"arrow_drop_down"})}),children:[Object(g.jsx)(d.a,{onClick:()=>v("all"),children:"All"}),Object(g.jsx)(d.a,{onClick:()=>v("read",!0),children:"Read"}),Object(g.jsx)(d.a,{onClick:()=>v("read",!1),children:"Unread"}),Object(g.jsx)(d.a,{onClick:()=>v("done",!0),children:"Done"}),Object(g.jsx)(d.a,{onClick:()=>v("done",!1),children:"Undone"}),Object(g.jsx)(d.a,{onClick:()=>v("important",!0),children:"Important"}),Object(g.jsx)(d.a,{onClick:()=>v("important",!1),children:"Unimportant"}),Object(g.jsx)(d.a,{onClick:()=>v("starred",!0),children:"Starred"}),Object(g.jsx)(d.a,{onClick:()=>v("starred",!1),children:"Unstarred"})]}),Object(g.jsxs)(h.h,{menuButton:Object(g.jsx)(c.a,{size:"large",children:Object(g.jsx)(r.a,{children:"label"})}),children:[Object(g.jsx)(d.a,{sx:{textTransform:"capitalize"},onClick:()=>A("all"),children:"all"}),j.map((e=>Object(g.jsx)(d.a,{sx:{textTransform:"capitalize"},onClick:()=>A(e.id),children:e.name},e.id)))]})]}),Object(g.jsx)(p.a,{pr:2,children:Object(g.jsx)(z.a,{variant:"contained",color:"primary",onClick:()=>m("/todo/list/add"),children:"Create Todo"})})]}),Object(g.jsx)("div",{className:"todo-list",children:Object(g.jsx)(y.a,{onDragEnd:async e=>{if(!e.destination)return;let t=((e,t,a)=>{const s=Array.from(e),[i]=s.splice(t,1);return s.splice(a,0,i),s})(x,e.source.index,e.destination.index),{data:s}=await(e=>w.a.post("/api/todo/reorder",{todoList:e}))(t);a&&(O(s),l(s))},children:Object(g.jsx)(y.c,{droppableId:"droppable",children:(e,t)=>Object(g.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[x.map(((e,t)=>Object(g.jsx)(y.b,{draggableId:e.id,index:t,children:(a,s)=>Object(g.jsx)("div",{ref:a.innerRef,...a.draggableProps,...a.dragHandleProps,style:a.draggableProps.style,children:Object(g.jsx)(k,{tagList:j,updateTodo:C,todo:e},t)})},e.id))),e.placeholder]})})})})]})},B=a(735),_=a(711),M=a(709),U=a(463),E=a(195),N=a(1319),R=a(106);const q=Object(x.a)(p.a)((()=>({display:"flex",alignItems:"center"}))),P=Object(x.a)(q)((()=>({justifyContent:"space-between"})));var W=e=>{let{open:t,handleClose:a}=e;const[i,n]=Object(s.useState)(!0),[r,o]=Object(s.useState)(""),[c,d]=Object(s.useState)([]),l=Object(s.useCallback)((async()=>{let{data:e}=await D();i&&d(e)}),[i]);Object(s.useEffect)((()=>(l(),()=>n(!1))),[l]),Object(s.useEffect)((()=>()=>n(!1)),[]);const j=e=>{"Enter"===e.key?h():o(e.target.value)},h=async e=>{if(""!==r.trim()){let{data:e}=await(e=>w.a.post("/api/todo/tag/add",{tag:e}))({id:Object(R.b)(),name:r.trim()});if(i){let t=[...c];t.push(e),d(t),o("")}}},b=async e=>{var t;if(await(t={id:e,name:r},w.a.post("/api/todo/tag/delete",{tag:t})),i){let t=c.filter((t=>t.id!==e));d([...t])}},{palette:x}=Object(O.a)(),u=x.error.main;return Object(g.jsx)(N.a,{onClose:a,open:t,maxWidth:"xs",children:Object(g.jsxs)(p.a,{px:2,py:3,children:[Object(g.jsxs)(q,{children:[Object(g.jsx)(U.a,{variant:"outlined",size:"small",onChange:j,onKeyDown:j,value:r,label:"New tag*",sx:{flexGrow:1}}),Object(g.jsx)("div",{children:Object(g.jsx)(z.a,{onClick:h,variant:"contained",color:"primary",children:"Add"})})]}),Object(g.jsx)(p.a,{pt:2,children:c.map(((e,t)=>Object(g.jsxs)(P,{my:1,children:[Object(g.jsx)("span",{children:t+1}),Object(g.jsx)(m.i,{sx:{textTransform:"capitalize"},children:e.name}),Object(g.jsx)(z.a,{onClickCapture:()=>b(e.id),variant:"contained",sx:{background:u},children:"Delete"})]},e.id)))}),Object(g.jsx)(p.a,{pt:2,textAlign:"right",children:Object(g.jsx)(z.a,{onClick:a,variant:"outlined",color:"secondary",children:"Close"})})]})})},H=a(105),G=a(1380),J=a(1320),V=a(1382);const F=Object(x.a)("div")((e=>{let{theme:t}=e;return{margin:"30px",zIndex:2e3,background:"#fff",borderRadius:"4px",boxShadow:H.b[5],[t.breakpoints.down("sm")]:{margin:"16px"}}})),K=Object(x.a)(p.a)((()=>({display:"flex",flexWrap:"wrap",alignItems:"center"}))),Q=Object(x.a)(K)((()=>({paddingTop:"8px",paddingBottom:"8px",justifyContent:"space-between",background:"rgba(0, 0, 0, 0.01)"}))),X=Object(x.a)(E.TextValidator)((()=>({width:"100%",marginBottom:"16px !important"})));class Y extends s.Component{constructor(){super(...arguments),this.state={todo:{title:"",note:"",done:!1,read:!1,starred:!1,important:!1,startDate:new Date,dueDate:new Date,tag:[]},tagList:[],shouldOpenTagDialog:!1},this.addNewTodo=()=>{let e=this.state.tagList.length+1;var t;(t={...this.state.todo,id:e},w.a.post("/api/todo/add",{todo:t})).then((()=>{this.props.history.push("/todo/list")}))},this.updateTodo=e=>{T(e),this.setState({todo:{...this.state.todo,...e}})},this.reloadTagList=()=>{D().then((e=>{let{data:t}=e;this.setState({tagList:[...t]})}))},this.addTagInTodo=e=>{let{tag:t}=this.state.todo;t.includes(e)||(t.push(e),this.setState({todo:{...this.state.todo,tag:t}}))},this.handleTagDelete=e=>{let{tag:t=[]}=this.state.todo;t=t.filter((t=>t!==e)),this.setState({todo:{...this.state.todo,tag:[...t]}},(()=>T({...this.state.todo})))},this.handleTodoDelete=()=>{var e;(e={...this.state.todo},w.a.post("/api/todo/delete",{todo:e})).then((()=>{this.props.history.push("/todo/list")}))},this.handleChange=e=>{e.persist(),this.setState({todo:{...this.state.todo,[e.target.name]:e.target.value}})},this.handleDateChange=(e,t)=>{this.setState(this.setState({todo:{...this.state.todo,[e]:t}}))},this.handleSubmit=e=>{let{id:t}=this.props.match.params;"add"===t?this.addNewTodo():T({...this.state.todo}).then((()=>{this.props.history.push("/todo/list")}))},this.handleTagDialogToggle=()=>{this.setState({shouldOpenTagDialog:!this.state.shouldOpenTagDialog})}}componentDidMount(){let{id:e}=this.props.match.params;D().then((t=>{let{data:a}=t;"add"!==e?(e=>w.a.get("/api/todo",{data:e}))(e).then((e=>{let{data:t}=e;t?this.setState({todo:{...t},tagList:[...a]}):this.props.history.push("/todo/list")})):this.setState({tagList:a})}))}render(){let{title:e,note:t,done:a,read:s,starred:i,important:n,startDate:x,dueDate:O,tag:m=[]}=this.state.todo,{tagList:u}=this.state;return Object(g.jsxs)(F,{children:[Object(g.jsxs)(Q,{children:[Object(g.jsxs)(K,{children:[Object(g.jsx)(b.b,{to:"/todo/list",children:Object(g.jsx)(c.a,{children:Object(g.jsx)(r.a,{children:"arrow_back"})})}),Object(g.jsx)(B.a,{smDown:!0,children:Object(g.jsx)(l.a,{sx:{ml:1},onChange:()=>this.updateTodo({...this.state,done:!a}),control:Object(g.jsx)(j.a,{checked:a}),label:"Mark As ".concat(a?"Und":"D","one")})})]}),Object(g.jsxs)(p.a,{display:"flex",flexWrap:"wrap",children:[Object(g.jsx)(_.a,{title:"Mark As ".concat(s?"Unr":"R","ead"),fontSize:"large",children:Object(g.jsx)(c.a,{onClick:()=>this.updateTodo({...this.state,read:!s}),children:Object(g.jsx)(r.a,{children:s?"drafts":"markunread"})})}),Object(g.jsx)(_.a,{title:"Mark As ".concat(n?"Uni":"I","mportant"),fontSize:"large",children:Object(g.jsx)(c.a,{onClick:()=>this.updateTodo({...this.state,important:!n}),children:Object(g.jsx)(r.a,{color:n?"error":"inherit",children:n?"error":"error_outline"})})}),Object(g.jsx)(_.a,{title:"Mark As ".concat(i?"Uns":"S","tarred"),fontSize:"large",children:Object(g.jsx)(c.a,{onClick:()=>this.updateTodo({...this.state,starred:!i}),children:Object(g.jsx)(r.a,{color:i?"secondary":"inherit",children:i?"star":"star_outline"})})}),Object(g.jsx)(B.a,{smDown:!0,children:Object(g.jsx)(_.a,{title:"Manage tags",fontSize:"large",children:Object(g.jsx)(c.a,{onClick:this.handleTagDialogToggle,children:Object(g.jsx)(r.a,{children:"library_add"})})})}),Object(g.jsx)(h.h,{menuButton:Object(g.jsx)(_.a,{title:"Add tags",fontSize:"large",children:Object(g.jsx)(c.a,{children:Object(g.jsx)(r.a,{children:"label"})})}),children:this.state.tagList.map((e=>Object(g.jsx)(d.a,{sx:{textTransform:"capitalize"},onClick:()=>this.addTagInTodo(e.id),children:e.name},e.id)))}),Object(g.jsx)(_.a,{title:"Delete",fontSize:"large",children:Object(g.jsx)(c.a,{onClick:this.handleTodoDelete,children:Object(g.jsx)(r.a,{children:"delete_outline"})})})]})]}),Object(g.jsxs)(p.a,{p:2,children:[m.length?Object(g.jsx)(p.a,{mb:2,children:m.map((e=>{let t=(u.find((t=>t.id===e))||{}).name;return t?Object(g.jsx)(o.a,{label:t,onDelete:()=>this.handleTagDelete(e),sx:{mr:1,textTransform:"capitalize"}},e):null}))}):null,Object(g.jsxs)(E.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit,onError:e=>null,children:[Object(g.jsx)(X,{label:"Title*",onChange:this.handleChange,type:"text",name:"title",value:e,validators:["required"],errorMessages:["this field is required"]}),Object(g.jsx)(X,{label:"Put your notes*",onChange:this.handleChange,type:"text",name:"note",multiline:!0,value:t,validators:["required"],errorMessages:["this field is required"]}),Object(g.jsx)(p.a,{mb:2,children:Object(g.jsx)(J.b,{dateAdapter:G.a,children:Object(g.jsxs)(M.a,{container:!0,spacing:2,children:[Object(g.jsx)(M.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(g.jsx)(V.a,{value:new Date(x),onChange:e=>this.handleDateChange("startDate",e),renderInput:e=>Object(g.jsx)(U.a,{...e,variant:"standard",id:"mui-pickers-date",label:"Start Date*"})})}),Object(g.jsx)(M.a,{item:!0,lg:6,md:6,sm:12,xs:12,children:Object(g.jsx)(V.a,{value:new Date(O),onChange:e=>this.handleDateChange("dueDate",e),renderInput:e=>Object(g.jsx)(U.a,{...e,variant:"standard",id:"mui-pickers-date",label:"End Date*"})})})]})})}),Object(g.jsx)(b.b,{to:"/todo/list",children:Object(g.jsx)(z.a,{variant:"outlined",color:"secondary",sx:{mr:2},type:"submit",children:"cancel"})}),Object(g.jsx)(z.a,{color:"primary",variant:"contained",type:"submit",children:"save"})]})]}),Object(g.jsx)(W,{reloadTagList:this.reloadTagList,open:this.state.shouldOpenTagDialog,handleClose:this.handleTagDialogToggle})]})}}var Z=Y;const $=Object(x.a)("div")((e=>{let{theme:t}=e;return{"& .searchBoxHolder":{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"calc(220px - 94px + 30px)",[t.breakpoints.down("sm")]:{height:"calc(220px - 94px -16px + 30px)"}},"& .searchBox":{width:"calc(100% - 60px)",[t.breakpoints.down("sm")]:{width:"calc(100% - 32px)"}},"& .todoContent":{marginTop:-94}}}));t.default=()=>{const[e,t]=Object(s.useState)(""),{palette:a}=Object(O.a)(),n=a.primary.main;return Object(g.jsxs)($,{children:[Object(g.jsx)(p.a,{height:220,sx:{background:n},children:Object(g.jsx)("div",{className:"searchBoxHolder",children:Object(g.jsx)("div",{className:"searchBox",children:Object(g.jsx)(U.a,{name:"query",value:e,variant:"outlined",size:"medium",fullWidth:!0,InputProps:{startAdornment:Object(g.jsx)(r.a,{sx:{mr:"12px"},children:"search"}),style:{borderRadius:300,background:"white",outline:"none"}},onChange:e=>{t(e.target.value)}})})})}),Object(g.jsx)("div",{className:"todoContent",children:Object(g.jsxs)(i.e,{children:[Object(g.jsx)(i.c,{path:"/todo/list/:id",element:Object(g.jsx)(Z,{})}),Object(g.jsx)(i.c,{path:"/todo/list",element:Object(g.jsx)(A,{query:e})})]})})]})}}}]);