(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[23],{1396:function(e,t,a){"use strict";var r=a(1);const n=r.createContext(void 0);t.a=n},1416:function(e,t,a){"use strict";var r=a(2),n=a(4),c=a(1),i=(a(9),a(686)),s=a(34),l=a(154),d=a(1396),o=a(175),j=a(0);const b=["actions","children","defaultValue","name","onChange","value"],x=c.forwardRef((function(e,t){const{actions:a,children:x,defaultValue:h,name:O,onChange:u,value:p}=e,m=Object(n.a)(e,b),g=c.useRef(null),[f,v]=Object(l.a)({controlled:p,default:h,name:"RadioGroup"});c.useImperativeHandle(a,(()=>({focus:()=>{let e=g.current.querySelector("input:not(:disabled):checked");e||(e=g.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const y=Object(s.a)(t,g),C=Object(o.a)(O);return Object(j.jsx)(d.a.Provider,{value:{name:C,onChange:e=>{v(e.target.value),u&&u(e,e.target.value)},value:f},children:Object(j.jsx)(i.a,Object(r.a)({role:"radiogroup",ref:y},m,{children:x}))})}));t.a=x},1417:function(e,t,a){"use strict";var r=a(4),n=a(2),c=a(1),i=(a(9),a(46)),s=a(74),l=a(294),d=a(12),o=a(36),j=a(0),b=Object(o.a)(Object(j.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),x=Object(o.a)(Object(j.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),h=a(5);const O=Object(h.a)("span")({position:"relative",display:"flex"}),u=Object(h.a)(b,{skipSx:!0})({transform:"scale(1)"}),p=Object(h.a)(x,{skipSx:!0})((e=>{let{theme:t,ownerState:a}=e;return Object(n.a)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},a.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));var m=function(e){const{checked:t=!1,classes:a={},fontSize:r}=e,c=Object(n.a)({},e,{checked:t});return Object(j.jsxs)(O,{className:a.root,ownerState:c,children:[Object(j.jsx)(u,{fontSize:r,className:a.background,ownerState:c}),Object(j.jsx)(p,{fontSize:r,className:a.dot,ownerState:c})]})},g=a(7),f=a(489),v=a(1396);var y=a(31),C=a(32);function w(e){return Object(y.a)("MuiRadio",e)}var k=Object(C.a)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);const S=["checked","checkedIcon","color","icon","name","onChange","size"],N=Object(h.a)(l.a,{shouldForwardProp:e=>Object(h.b)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t["color".concat(Object(g.a)(a.color))]]}})((e=>{let{theme:t,ownerState:a}=e;return Object(n.a)({color:t.palette.text.secondary,"&:hover":{backgroundColor:Object(s.a)("default"===a.color?t.palette.action.active:t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{["&.".concat(k.checked)]:{color:t.palette[a.color].main}},{["&.".concat(k.disabled)]:{color:t.palette.action.disabled}})}));const I=Object(j.jsx)(m,{checked:!0}),M=Object(j.jsx)(m,{}),T=c.forwardRef((function(e,t){var a,s;const l=Object(d.a)({props:e,name:"MuiRadio"}),{checked:o,checkedIcon:b=I,color:x="primary",icon:h=M,name:O,onChange:u,size:p="medium"}=l,m=Object(r.a)(l,S),y=Object(n.a)({},l,{color:x,size:p}),C=(e=>{const{classes:t,color:a}=e,r={root:["root","color".concat(Object(g.a)(a))]};return Object(n.a)({},t,Object(i.a)(r,w,t))})(y),k=c.useContext(v.a);let T=o;const q=Object(f.a)(u,k&&k.onChange);let z=O;var V,R;return k&&("undefined"===typeof T&&(V=k.value,T="object"===typeof(R=l.value)&&null!==R?V===R:String(V)===String(R)),"undefined"===typeof z&&(z=k.name)),Object(j.jsx)(N,Object(n.a)({type:"radio",icon:c.cloneElement(h,{fontSize:null!=(a=M.props.fontSize)?a:p}),checkedIcon:c.cloneElement(b,{fontSize:null!=(s=I.props.fontSize)?s:p}),ownerState:y,classes:C,name:z,checked:T,onChange:q,ref:t},m))}));t.a=T},1449:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"e",(function(){return d}));var r=a(19),n=a.n(r);const c=()=>n.a.get("/api/invoices/all"),i=e=>n.a.get("/api/invoices",{data:e}),s=e=>n.a.post("/api/invoices/delete",e),l=e=>n.a.post("/api/invoices/add",e),d=e=>n.a.post("/api/invoices/update",e)},1820:function(e,t,a){"use strict";a.r(t);var r=a(739),n=a(622),c=a(172),i=a(95),s=a(382),l=a(1313),d=a(623),o=a(624),j=a(621),b=a(625),x=a(731),h=a(21),O=a(68),u=a(1449),p=a(1),m=a(28),g=a(49),f=a(35),v=a(0);const y=Object(h.a)(O.a)((()=>({display:"flex",justifyContent:"space-between"}))),C=Object(h.a)(y)((()=>({paddingLeft:"16px",paddingRight:"16px",marginBottom:"20px",alignItems:"center","& button":{fontSize:"13px",textTransform:"capitalize"}}))),w=Object(h.a)("div")((()=>({textAlign:"right","& h5":{fontWeight:"500",textTransform:"capitalize"}}))),k=Object(h.a)(f.e)((()=>({fontSize:15,"& span":{fontWeight:"normal"}}))),S=Object(h.a)(n.a)((e=>{let{theme:t}=e;return{"& thead":{"& tr":{background:t.palette.background.default,"& th":{paddingLeft:0,paddingRight:0},"& th:first-child":{paddingLeft:"24px !important",[t.breakpoints.down("sm")]:{paddingLeft:"16px !important"}}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"},"& td:first-child":{textTransform:"capitalize",paddingLeft:"24px !important",[t.breakpoints.down("sm")]:{paddingLeft:"16px !important"}}}}}}));var N=e=>{let{toggleInvoiceEditor:t}=e;const{id:a}=Object(m.i)(),[n,h]=Object(p.useState)({});Object(p.useEffect)((()=>{"add"!==a&&Object(u.d)(a).then((e=>{h({...e.data})}))}),[a]);let N=0,{orderNo:I,buyer:M,seller:T,item:q=[],status:z,vat:V,date:R}=n;return Object(v.jsxs)(O.a,{py:2,className:"invoice-viewer",children:[Object(v.jsxs)(C,{className:"viewer_actions",children:[Object(v.jsx)(g.b,{to:"/invoice/list",children:Object(v.jsx)(c.a,{children:Object(v.jsx)(i.a,{children:"arrow_back"})})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(s.a,{sx:{mr:2,py:1},variant:"contained",color:"primary",onClick:()=>t(),children:"Edit Invoice"}),Object(v.jsx)(s.a,{sx:{py:1},onClick:()=>window.print(),variant:"contained",color:"secondary",children:"Print Invoice"})]})]}),Object(v.jsxs)("div",{id:"print-area",children:[Object(v.jsxs)(y,{px:2,mb:2,className:"viewer__order-info",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{sx:{mb:1},children:"Order Info"}),Object(v.jsx)(f.g,{sx:{mb:2},children:"Order Number"}),Object(v.jsxs)(f.g,{children:["# ",I]})]}),Object(v.jsxs)(w,{children:[Object(v.jsxs)(k,{sx:{mb:1},children:[Object(v.jsx)("strong",{children:"Order status: "}),Object(v.jsx)("span",{children:z})]}),Object(v.jsxs)(k,{children:[Object(v.jsx)("strong",{children:"Order date: "}),Object(v.jsx)("span",{children:R?Object(x.a)(new Date(R).getTime(),"MMMM dd, yyyy"):""})]})]})]}),Object(v.jsx)(l.a,{}),Object(v.jsxs)(y,{px:2,py:"20px",mb:2,className:"viewer__billing-info",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(k,{sx:{mb:1},children:"Bill From"}),Object(v.jsx)(f.g,{sx:{mb:2},children:T?T.name:null}),Object(v.jsx)(f.g,{sx:{whiteSpace:"pre"},children:T?T.address:null})]}),Object(v.jsxs)(O.a,{width:"100%",textAlign:"right",children:[Object(v.jsx)(k,{sx:{mb:1},children:"Bill To"}),Object(v.jsx)(f.g,{sx:{mb:2},children:M?M.name:null}),Object(v.jsx)(f.g,{sx:{whiteSpace:"pre"},children:M?M.address:null})]}),Object(v.jsx)("div",{})]}),Object(v.jsx)(r.a,{sx:{mb:2},elevation:0,children:Object(v.jsxs)(S,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(o.a,{children:[Object(v.jsx)(j.a,{children:"#"}),Object(v.jsx)(j.a,{children:"Item Name"}),Object(v.jsx)(j.a,{children:"Unit Price"}),Object(v.jsx)(j.a,{children:"Unit"}),Object(v.jsx)(j.a,{children:"Cost"})]})}),Object(v.jsx)(b.a,{children:q.map(((e,t)=>(N+=e.unit*e.price,Object(v.jsxs)(o.a,{children:[Object(v.jsx)(j.a,{align:"left",children:t+1}),Object(v.jsx)(j.a,{align:"left",children:e.name}),Object(v.jsx)(j.a,{align:"left",children:e.price}),Object(v.jsx)(j.a,{children:e.unit}),Object(v.jsx)(j.a,{children:e.unit*e.price})]},t))))})]})}),Object(v.jsx)(y,{px:2,sx:{justifyContent:"flex-end"},children:Object(v.jsxs)(O.a,{display:"flex",children:[Object(v.jsxs)(O.a,{pr:6,children:[Object(v.jsx)(f.g,{sx:{my:2},children:"Sub Total:"}),Object(v.jsx)(f.g,{sx:{mb:2},children:"Vat(%):"}),Object(v.jsx)("strong",{children:Object(v.jsx)("p",{children:"Grand Total:"})})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(f.g,{sx:{my:2},children:N}),Object(v.jsx)(f.g,{sx:{mb:2},children:V}),Object(v.jsx)("p",{children:Object(v.jsxs)("strong",{children:["$",N+=N*V/100]})})]})]})})]})]})},I=a(465),M=a(1416),T=a(685),q=a(1417),z=a(463),V=a(709),R=a(195),L=a(1380),E=a(1320),P=a(1382);const W=Object(h.a)("h5")((()=>({fontSize:15}))),B=Object(h.a)(O.a)((()=>({display:"flex",justifyContent:"flex-end"}))),_=Object(h.a)(O.a)((()=>({display:"flex",justifyContent:"space-between","& .label":{height:32}}))),A=Object(h.a)(n.a)((e=>{let{theme:t}=e;return{marginBottom:2,"& thead":{"& tr":{background:t.palette.background.default,"& th":{paddingLeft:0,paddingRight:0},"& th:first-child":{paddingLeft:"24px !important",[t.breakpoints.down("sm")]:{paddingLeft:"16px !important"}}}},"& tbody":{"& tr":{"& td":{paddingLeft:0,textTransform:"capitalize"},"& td:first-child":{textTransform:"capitalize",paddingLeft:"24px !important",[t.breakpoints.down("sm")]:{paddingLeft:"16px !important"}}}}}})),D={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"",loading:!1};var U=e=>{let{isNewInvoice:t,toggleInvoiceEditor:a}=e;const[r,n]=Object(p.useState)(!0),[c,i]=Object(p.useState)(D),x=Object(m.h)(),{id:h}=Object(m.i)(),g=Object(p.useCallback)((()=>{let e=Math.random().toString(),t=e.substr(2,e.length-1);i((e=>({...e,id:t})))}),[]),y=e=>{e.persist(),i({...c,[e.target.name]:e.target.value})},C=(e,t)=>{e.persist(),i({...c,[t]:{...c[t],[e.target.name]:e.target.value}})},w=(e,t)=>{let a=[...c.item];a.map(((a,r)=>(t===r&&(a[e.target.name]=e.target.value),a))),i({...c,item:a})};Object(p.useEffect)((()=>{t?g():Object(u.d)(h).then((e=>{let{data:t}=e;r&&i({...t})}))}),[h,t,r,g]),Object(p.useEffect)((()=>()=>n(!1)),[]);let k=0,{orderNo:S,buyer:N,seller:U,item:F=[],status:G,vat:J,date:H,currency:Z,loading:$}=c;return Object(v.jsx)(O.a,{py:2,className:"invoice-viewer",children:Object(v.jsxs)(R.ValidatorForm,{onSubmit:()=>{i({...c,loading:!0});let e={...c};delete e.loading,t?Object(u.a)(e).then((()=>{i({...c,loading:!1}),x("/invoice/".concat(c.id)),a()})):Object(u.e)(e).then((()=>{i({...c,loading:!1}),a()}))},onError:e=>null,children:[Object(v.jsx)(B,{px:2,className:"viewer_actions",children:Object(v.jsxs)(O.a,{mb:3,children:[Object(v.jsx)(s.a,{type:"button",variant:"text",sx:{mr:2,py:1},onClick:()=>a(),children:"Cancel"}),Object(v.jsx)(s.a,{type:"submit",variant:"contained",color:"primary",sx:{py:1},disabled:$,children:"Save"})]})}),Object(v.jsxs)(_,{px:2,mb:2,className:"viewer__order-info",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(W,{sx:{mb:1},children:"Order Info"}),Object(v.jsx)(f.g,{sx:{mb:2},children:"Order Number"}),Object(v.jsx)(R.TextValidator,{label:"Order No.",type:"text",fullWidth:!0,name:"orderNo",value:S,onChange:y,validators:["required"],errorMessages:["this field is required"]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(I.a,{component:"fieldset",sx:{mb:2,width:"100%"},children:Object(v.jsxs)(M.a,{"aria-label":"status",name:"status",value:G,onChange:y,children:[Object(v.jsx)(T.a,{className:"label",value:"pending",control:Object(v.jsx)(q.a,{color:"secondary"}),label:"Pending",labelPlacement:"start"}),Object(v.jsx)(T.a,{className:"label",value:"processing",control:Object(v.jsx)(q.a,{color:"secondary"}),label:"Processing",labelPlacement:"start"}),Object(v.jsx)(T.a,{className:"label",value:"delivered",control:Object(v.jsx)(q.a,{color:"secondary"}),label:"Delivered",labelPlacement:"start"})]})}),Object(v.jsx)(O.a,{textAlign:"right",children:Object(v.jsx)(W,{sx:{fontWeight:"500"},children:Object(v.jsx)("strong",{children:"Order date: "})})}),Object(v.jsx)(E.b,{dateAdapter:L.a,children:Object(v.jsx)(P.a,{value:new Date,onChange:e=>{i({...c,date:e})},renderInput:e=>Object(v.jsx)(z.a,{...e,variant:"standard",id:"mui-pickers-date",label:"Order Date"})})})]})]}),Object(v.jsx)(l.a,{}),Object(v.jsxs)(V.a,{container:!0,spacing:4,justify:"space-between",sx:{px:2,py:"20px"},children:[Object(v.jsx)(V.a,{item:!0,children:Object(v.jsxs)("div",{children:[Object(v.jsx)(W,{sx:{mb:"20px"},children:"Bill From"}),Object(v.jsx)(R.TextValidator,{sx:{mb:"20px"},label:"Seller Name",onChange:e=>C(e,"seller"),type:"text",name:"name",fullWidth:!0,value:U?U.name:null,validators:["required"],errorMessages:["this field is required"]}),Object(v.jsx)(R.TextValidator,{label:"Seller Name",type:"text",onChange:e=>C(e,"seller"),name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:U?U.address:null,validators:["required"],errorMessages:["this field is required"]})]})}),Object(v.jsx)(V.a,{item:!0,children:Object(v.jsxs)(O.a,{textAlign:"right",children:[Object(v.jsx)(W,{sx:{mb:"20px"},children:"Bill To"}),Object(v.jsx)(R.TextValidator,{sx:{mb:"20px"},label:"Buyer Name",onChange:e=>C(e,"buyer"),type:"text",name:"name",fullWidth:!0,value:N?N.name:null,validators:["required"],errorMessages:["this field is required"]}),Object(v.jsx)(R.TextValidator,{label:"Buyer Address",onChange:e=>C(e,"buyer"),type:"text",name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:N?N.address:null,validators:["required"],errorMessages:["this field is required"]})]})})]}),Object(v.jsxs)(A,{children:[Object(v.jsx)(d.a,{children:Object(v.jsxs)(o.a,{children:[Object(v.jsx)(j.a,{children:"#"}),Object(v.jsx)(j.a,{children:"Item Name"}),Object(v.jsx)(j.a,{children:"Unit Price"}),Object(v.jsx)(j.a,{children:"Unit"}),Object(v.jsx)(j.a,{children:"Cost"}),Object(v.jsx)(j.a,{children:"Action"})]})}),Object(v.jsx)(b.a,{children:F.map(((e,t)=>(k+=e.price*e.unit,Object(v.jsxs)(o.a,{children:[Object(v.jsx)(j.a,{align:"left",children:t+1}),Object(v.jsx)(j.a,{align:"left",children:Object(v.jsx)(R.TextValidator,{label:"Item Name",onChange:e=>w(e,t),type:"text",name:"name",fullWidth:!0,value:e?e.name:null,validators:["required"],errorMessages:["this field is required"]})}),Object(v.jsx)(j.a,{align:"left",children:Object(v.jsx)(R.TextValidator,{label:"Item Price",onChange:e=>w(e,t),type:"number",name:"price",fullWidth:!0,value:e?e.price:null,validators:["required"],errorMessages:["this field is required"]})}),Object(v.jsx)(j.a,{align:"left",children:Object(v.jsx)(R.TextValidator,{label:"Item Unit",onChange:e=>w(e,t),type:"number",name:"unit",fullWidth:!0,value:e?e.unit:null,validators:["required"],errorMessages:["this field is required"]})}),Object(v.jsx)(j.a,{align:"left",children:e.unit*e.price}),Object(v.jsx)(j.a,{align:"left",children:Object(v.jsx)(s.a,{onClick:()=>(e=>{let t=[...c.item];t.splice(e,1),i({...c,item:t})})(t),children:"Delete"})})]},t))))})]}),Object(v.jsx)(B,{px:2,mb:2,children:Object(v.jsx)(s.a,{onClick:()=>{let e=[...c.item];e.push({name:"",unit:"",price:""}),i({...c,item:e})},children:"Add Item"})}),Object(v.jsx)(B,{px:2,children:Object(v.jsxs)(O.a,{display:"flex",children:[Object(v.jsxs)(O.a,{pr:6,children:[Object(v.jsx)(f.g,{sx:{mb:4},children:"Sub Total:"}),Object(v.jsx)(f.g,{sx:{mb:6},children:"Vat(%):"}),Object(v.jsx)(f.g,{sx:{mb:"20px"},children:"currency:"}),Object(v.jsx)("strong",{children:Object(v.jsx)("p",{children:"Grand Total:"})})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(f.g,{sx:{mb:2},children:k}),Object(v.jsx)(R.TextValidator,{sx:{mb:2},label:"Vat",type:"number",name:"vat",value:J,onChange:y,validators:["required"],errorMessages:["this field is required"]}),Object(v.jsx)("br",{}),Object(v.jsx)(R.TextValidator,{label:"Currency",onChange:y,type:"text",name:"currency",value:Z,validators:["required"],errorMessages:["this field is required"]}),Object(v.jsx)(f.g,{sx:{mt:2},children:Object(v.jsxs)("strong",{children:[Z,k+k*J/100]})})]})]})})]})})};const F=Object(h.a)(r.a)((e=>{let{theme:t}=e;return{margin:"30px",[t.breakpoints.down("sm")]:{margin:"16px"}}}));t.default=()=>{const[e,t]=Object(p.useState)(!1),[a,r]=Object(p.useState)(!1),{id:n}=Object(m.i)(),c=()=>{t(!e),r(!1)};return Object(p.useEffect)((()=>{"add"===n&&(t(!0),r(!0))}),[n]),Object(v.jsx)(F,{elevation:6,children:e?Object(v.jsx)(U,{toggleInvoiceEditor:c,isNewInvoice:a}):Object(v.jsx)(N,{toggleInvoiceEditor:c})})}}}]);